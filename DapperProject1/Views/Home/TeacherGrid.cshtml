@model IEnumerable<DapperProject1.Models.Teacher>
@{
    ViewData["Title"] = "Teachers";

}


<script src="~/jquery.js"></script>
    <h3>Teachers</h3>
<link type="text/css" rel="stylesheet" href="~/jsgrid-1.5.3/jsgrid.min.css" />
<link type="text/css" rel="stylesheet" href="~/jsgrid-1.5.3/jsgrid-theme.min.css" />

<script type="text/javascript" src="~/jsgrid-1.5.3/jsgrid.min.js"></script>
<div id="jsGrid"></div>

<script>
    $(function () {

        $("#jsGrid").jsGrid({
            height: "auto",
            width: "100%",

            sorting: true,
            paging: false,
            autoload: true,

            controller: {
                loadData: function () {
                    var d = $.Deferred();

                    $.ajax({
                        url: "/Home/GetData",
                        dataType: "json"
                    }).done(function (response) {
                        d.resolve(response);
                        })
                        .done(function (response) {
                            console.log(response);
                            d.resolve(response);
                        });;

                    return d.promise();
                }
            },

            fields: [
                { name: "url",
                    itemTemplate: function (value) {
                        return $("<a>").attr("href", value).text(value);
                    }, width: 30, filtering: true
                },
                { name: "italkiURL", itemTemplate: function (value) {
                        return $("<a>").attr("href","https://"+value).text(value);
                   }, width: 35, filtering: true },
                { name: "firstName", type: "text", width: 20 },
                { name: "lastName", type: "text", width: 20 },
                { name: "numberOfStudents", type: "number", width: 25 },
                { name: "numberOfLessons", type: "number", width: 25 },
                { name: "rating", type: "number", width: 8 }
            ]
        });

    });
</script>
